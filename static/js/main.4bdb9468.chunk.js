(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(45)},39:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var u,s,d=n(9),m=n(14),f=n(10),p=n(11),h=function e(){var t=this;Object(p.a)(this,e),this.data=[{id:1,title:"Production-Ready Microservices",author:"Susan J. Fowler",price:32,coverImage:"https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg"},{id:2,title:"Release It!",author:"Michael T. Nygard",price:45,coverImage:"https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg"}],this.getBooks=function(){return new Promise(function(e,n){setTimeout(function(){Math.random()>.75?n(new Error("Something bad happened")):e(t.data)},700)})}},v=r.a.createContext(),E=v.Provider,b=v.Consumer,g=n(8),O=n(28),k=-1,C=1,y=function(e){var t=e.getState;return function(e){return function(n){var a=n.type,r=e(n),o=t(),c="%c ".concat(a," ");return console.log(c,"color: #fff; background-color: #2274a5",o),r}}},w=function(){return function(e){return function(t){var n=e(t);return"string"===typeof t?e({type:t}):n}}},_=function(e){var t=e.getState;return function(e){return function(n){var a=e(n),r=t(),o=JSON.stringify(r);return localStorage.setItem("re-store",o),a}}},S={bookList:{books:[],loading:!0,error:null}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"FETCH_BOOKS_REQUEST":return{books:[],loading:!0,error:null};case"FETCH_BOOKS_SUCCESS":return{books:a,loading:!1,error:null};case"FETCH_BOOKS_FAILURE":return{books:[],loading:!1,error:a};default:return e.bookList}},A=n(12),I=function(e,t){var n=0;return e.forEach(function(e){n+=e[t]}),n},N=function(e,t,n){var a=e.bookList.books,r=e.shoppingCart.cartItems,o=a.find(function(e){return e.id===t}),c=r.findIndex(function(e){return e.id===t}),i=function(e,t,n){var a=t.count,r=e.slice(0,n),o=e.slice(n+1);return 0===a?[].concat(Object(A.a)(r),Object(A.a)(o)):-1===n?[].concat(Object(A.a)(e),[t]):[].concat(Object(A.a)(r),[t],Object(A.a)(o))}(r,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=e.id,r=e.title,o=e.price,c=t.id,i=void 0===c?a:c,l=t.count,u=void 0===l?0:l,s=t.title,d=void 0===s?r:s,m=t.total;return{id:i,title:d,count:u+n,total:(void 0===m?0:m)+n*o}}(o,r[c],n),c);return{totalOrder:I(i,"total"),totalCount:I(i,"count"),cartItems:i}},j=function(e){var t=e.displayName,n=e.name;return t||n||"Component"},D={shoppingCart:{cartItems:[],orderTotal:0,countTotal:0}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=k,o=C;switch(n){case"BOOK_ADDED_TO_CART":return N(e,a,o);case"BOOK_REMOVED_FROM_CART":return N(e,a,r);case"ALL_BOOKS_REMOVED_FROM_CART":var c=e.shoppingCart.cartItems.find(function(e){return e.id===a}).count;return N(e,a,-c);default:return e.shoppingCart}},B=function(e,t){return{bookList:T(e,t),shoppingCart:R(e,t)}},L=g.c,P=function(){try{var e=localStorage.getItem("re-store");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),F=(u=P,Object(g.d)(B,u,L(Object(g.a)(_,O.a,w,y))));F.dispatch((s=3e3,function(e){setTimeout(function(){return e({type:"DELAYED_ACTION"})},s)}));var K=F,M=(n(39),function(e){var t=e.count,n=e.total;return r.a.createElement("header",{className:"shop-header row"},r.a.createElement(m.b,{to:"/"},r.a.createElement("div",{className:"logo text-dark"},"InternetShop")),r.a.createElement(m.b,{to:"/cart"},r.a.createElement("div",{className:"shopping-cart"},r.a.createElement("i",{className:"cart-icon fa fa-shopping-cart"}),t," items ($",n,")")))});M.defaultProps={count:0,total:0};var x=Object(d.b)(function(e){var t=e.shoppingCart;return{count:t.totalCount,total:t.totalOrder}})(M),U=n(17),W=n(19),H=n(18),J=n(20),V=function(){return r.a.createElement("div",null,"Error!")},$=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},n}return Object(J.a)(t,e),Object(U.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){var e=this.state.hasError,t=this.props.children;return e?r.a.createElement(V,null):t}}]),t}(a.Component);$.defaultProps={children:null};var z=$,Q=function(){return function(e){var t=function(t){return r.a.createElement(b,null,function(n){return r.a.createElement(e,Object.assign({},t,{bookstoreService:n}))})};return t.displayName="withBookstoreService(".concat(j(e),")"),t}},X=function(e){return{type:"FETCH_BOOKS_SUCCESS",payload:e}},Y=function(e){return{type:"FETCH_BOOKS_FAILURE",payload:e}},q=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},G=function(e){return function(){return function(t){t({type:"FETCH_BOOKS_REQUEST"}),e.getBooks().then(function(e){return t(X(e))}).catch(function(e){return t(Y(e))})}}},Z=(n(41),function(e){var t=e.title,n=e.author,a=e.price,o=e.coverImage,c=e.onAddedToCart;return r.a.createElement("div",{className:"book-list-item"},r.a.createElement("div",{className:"book-cover"},r.a.createElement("img",{src:o,alt:"cover"})),r.a.createElement("div",{className:"book-details"},r.a.createElement("span",{className:"book-title"},t),r.a.createElement("div",{className:"book-author"},n),r.a.createElement("div",{className:"book-price"},"$",a),r.a.createElement("button",{onClick:c,className:"btn add-to-cart"},"Add to cart")))});Z.defaultProps={onAddedToCart:function(){},title:"",author:"",price:0,coverImage:""};var ee=Z,te=(n(42),function(e){var t=e.books,n=e.onAddedToCart;return r.a.createElement("ul",{className:"book-list"},t.map(function(e){var t=e.title,a=e.author,o=e.price,c=e.coverImage,i=e.id;return r.a.createElement("li",{key:i},r.a.createElement(ee,{title:t,author:a,price:o,coverImage:c,onAddedToCart:function(){return n(i)}}))}))});te.defaultProps={onAddedToCart:function(){},books:[]};var ne=te,ae=function(){return r.a.createElement("div",null,"loading...")},re=function(e){function t(){return Object(p.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(U.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fetchBooks)()}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.loading,a=e.error,o=e.onAddedToCart;return n?r.a.createElement(ae,null):a?r.a.createElement(V,null):r.a.createElement(ne,{books:t,onAddedToCart:o})}}]),t}(a.Component);re.defaultProps={loading:!1,error:{},fetchBooks:function(){},onAddedToCart:function(){},books:[]};var oe=Object(g.c)(Q(),Object(d.b)(function(e){var t=e.bookList;return{books:t.books,loading:t.loading,error:t.error}},function(e,t){var n=t.bookstoreService;return Object(g.b)({fetchBooks:G(n),onAddedToCart:q},e)}))(re),ce=(n(43),function(e){var t=e.id,n=e.title,a=e.count,o=e.total,c=e.idx,i=e.onIncrease,l=e.onDecrease,u=e.onDelete;return r.a.createElement("tr",null,r.a.createElement("td",null,c+1),r.a.createElement("td",null,n),r.a.createElement("td",null,a),r.a.createElement("td",null,"$",o),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return u(t)},className:"btn btn-outline-danger btn-sm float-right"},r.a.createElement("i",{className:"fa fa-trash-o"})),r.a.createElement("button",{onClick:function(){return i(t)},className:"btn btn-outline-success btn-sm float-right"},r.a.createElement("i",{className:"fa fa-plus-circle"})),r.a.createElement("button",{onClick:function(){return l(t)},className:"btn btn-outline-warning btn-sm float-right"},r.a.createElement("i",{className:"fa fa-minus-circle"}))))});ce.defaultProps={id:0,title:"",count:0,total:0,idx:0,onIncrease:function(){},onDecrease:function(){},onDelete:function(){}};var ie=ce,le=(n(44),function(e){var t=e.items,n=e.total,a=e.onIncrease,o=e.onDecrease,c=e.onDelete;return r.a.createElement("div",{className:"shopping-cart-table"},r.a.createElement("h2",null,"Your Order"),t&&t.length?r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Item"),r.a.createElement("th",null,"Count"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,t.map(function(e,t){var n=e.id,i=e.title,l=e.count,u=e.total;return r.a.createElement(ie,{key:t,idx:t,id:n,title:i,count:l,total:u,onIncrease:a,onDecrease:o,onDelete:c})})))):null,r.a.createElement("div",{className:"total"},"Total: $",n))}),ue={onIncrease:q,onDecrease:function(e){return{type:"BOOK_REMOVED_FROM_CART",payload:e}},onDelete:function(e){return{type:"ALL_BOOKS_REMOVED_FROM_CART",payload:e}}};le.defaultProps={items:[],total:0,onIncrease:function(){},onDecrease:function(){},onDelete:function(){}};var se=Object(d.b)(function(e){var t=e.shoppingCart;return{items:t.cartItems,total:t.totalOrder}},ue)(le),de=function(){return r.a.createElement("div",null,r.a.createElement(oe,null),r.a.createElement(se,null))},me=function(){return r.a.createElement("div",null,"Cart Page")},fe=new h,pe=function(){return r.a.createElement(d.a,{store:K},r.a.createElement(z,null,r.a.createElement(E,{value:fe},r.a.createElement(m.a,null,r.a.createElement("main",{className:"container"},r.a.createElement(x,null),r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/",component:de,exact:!0}),r.a.createElement(f.a,{path:"/cart",component:me})))))))};c.a.render(r.a.createElement(pe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/InternetShop",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/InternetShop","/service-worker.js");i?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):l(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):l(t,e)})}}()}},[[30,1,2]]]);
//# sourceMappingURL=main.4bdb9468.chunk.js.map