(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,n){e.exports=n(49)},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(16),c=n.n(r),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var u=n(9),s=n(15),d=n(10),m=n(11),f=function e(){var t=this;Object(m.a)(this,e),this.data=[{id:1,title:"Production-Ready Microservices",author:"Susan J. Fowler",price:32,coverImage:"https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg"},{id:2,title:"Release It!",author:"Michael T. Nygard",price:45,coverImage:"https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg"}],this.getBooks=function(){return new Promise(function(e,n){setTimeout(function(){Math.random()>.75?n(new Error("Something bad happened")):e(t.data)},700)})}},p=o.a.createContext(),h=p.Provider,v=p.Consumer,E=n(8),b=n(29),g=n(12),O=-1,k=1,C=Object(g.load)({namespace:"re-store"});C&&C.bookList&&C.books||(C={bookList:{books:[],loading:!0,error:null}});var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"FETCH_BOOKS_REQUEST":return{books:[],loading:!0,error:null};case"FETCH_BOOKS_SUCCESS":return{books:a,loading:!1,error:null};case"FETCH_BOOKS_FAILURE":return{books:[],loading:!1,error:a};default:return e.bookList}},w=n(13),_=function(e,t){var n=0;return e.forEach(function(e){n+=e[t]}),n},T=function(e,t,n){var a=e.bookList.books,o=e.shoppingCart.cartItems,r=a.find(function(e){return e.id===t}),c=o.findIndex(function(e){return e.id===t}),i=function(e,t,n){var a=t.count,o=e.slice(0,n),r=e.slice(n+1);return 0===a?[].concat(Object(w.a)(o),Object(w.a)(r)):-1===n?[].concat(Object(w.a)(e),[t]):[].concat(Object(w.a)(o),[t],Object(w.a)(r))}(o,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=e.id,o=e.title,r=e.price,c=t.id,i=void 0===c?a:c,l=t.count,u=void 0===l?0:l,s=t.title,d=void 0===s?o:s,m=t.total;return{id:i,title:d,count:u+n,total:(void 0===m?0:m)+n*r}}(r,o[c],n),c);return{totalOrder:_(i,"total"),totalCount:_(i,"count"),cartItems:i}},j=function(e){var t=e.displayName,n=e.name;return t||n||"Component"},A=Object(g.load)({namespace:"re-store"});A&&A.shoppingCart&&A.cartItems||(A={shoppingCart:{cartItems:[],orderTotal:0,countTotal:0}});var S,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,o=O,r=k;switch(n){case"BOOK_ADDED_TO_CART":return T(e,a,r);case"BOOK_REMOVED_FROM_CART":return T(e,a,o);case"ALL_BOOKS_REMOVED_FROM_CART":var c=e.shoppingCart.cartItems.find(function(e){return e.id===a}).count;return T(e,a,-c);default:return e.shoppingCart}},N=function(e,t){return{bookList:y(e,t),shoppingCart:I(e,t)}},D=E.c,R=Object(E.d)(N,D(Object(E.a)(Object(g.save)({namespace:"re-store"}),b.a,function(){return function(e){return function(t){return e("string"===typeof t?{type:t}:t)}}},function(e){var t=e.getState;return function(e){return function(n){var a=n.type;return console.log("%c ".concat(a," "),"color: #fff; background-color: #2274a5",t()),e(n)}}})));R.dispatch((S=3e3,function(e){setTimeout(function(){return e({type:"DELAYED_ACTION"})},S)}));var B=R,L=(n(43),function(e){var t=e.count,n=e.total;return o.a.createElement("header",{className:"shop-header row"},o.a.createElement(s.b,{to:"/"},o.a.createElement("div",{className:"logo text-dark"},"InternetShop")),o.a.createElement(s.b,{to:"/cart"},o.a.createElement("div",{className:"shopping-cart"},o.a.createElement("i",{className:"cart-icon fa fa-shopping-cart"}),t," items ($",n,")")))});L.defaultProps={count:0,total:0};var P=Object(u.b)(function(e){var t=e.shoppingCart;return{count:t.totalCount,total:t.totalOrder}})(L),F=n(18),K=n(20),M=n(19),x=n(21),U=function(){return o.a.createElement("div",null,"Error!")},W=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(K.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).state={hasError:!1},n}return Object(x.a)(t,e),Object(F.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){var e=this.state.hasError,t=this.props.children;return e?o.a.createElement(U,null):t}}]),t}(a.Component);W.defaultProps={children:null};var H=W,V=function(){return function(e){var t=function(t){return o.a.createElement(v,null,function(n){return o.a.createElement(e,Object.assign({},t,{bookstoreService:n}))})};return t.displayName="withBookstoreService(".concat(j(e),")"),t}},$=function(e){return{type:"FETCH_BOOKS_SUCCESS",payload:e}},J=function(e){return{type:"FETCH_BOOKS_FAILURE",payload:e}},z=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},Q=function(e){return function(){return function(t){t({type:"FETCH_BOOKS_REQUEST"}),e.getBooks().then(function(e){return t($(e))}).catch(function(e){return t(J(e))})}}},X=(n(45),function(e){var t=e.title,n=e.author,a=e.price,r=e.coverImage,c=e.onAddedToCart;return o.a.createElement("div",{className:"book-list-item"},o.a.createElement("div",{className:"book-cover"},o.a.createElement("img",{src:r,alt:"cover"})),o.a.createElement("div",{className:"book-details"},o.a.createElement("span",{className:"book-title"},t),o.a.createElement("div",{className:"book-author"},n),o.a.createElement("div",{className:"book-price"},"$",a),o.a.createElement("button",{onClick:c,className:"btn btn-info add-to-cart"},"Add to cart")))});X.defaultProps={onAddedToCart:function(){},title:"",author:"",price:0,coverImage:""};var Y=X,q=(n(46),function(e){var t=e.books,n=e.onAddedToCart;return o.a.createElement("ul",{className:"book-list"},t.map(function(e){var t=e.title,a=e.author,r=e.price,c=e.coverImage,i=e.id;return o.a.createElement("li",{key:i},o.a.createElement(Y,{title:t,author:a,price:r,coverImage:c,onAddedToCart:function(){return n(i)}}))}))});q.defaultProps={onAddedToCart:function(){},books:[]};var G=q,Z=function(){return o.a.createElement("div",null,"loading...")},ee=function(e){function t(){return Object(m.a)(this,t),Object(K.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fetchBooks)()}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.loading,a=e.error,r=e.onAddedToCart;return n?o.a.createElement(Z,null):a?o.a.createElement(U,null):o.a.createElement(G,{books:t,onAddedToCart:r})}}]),t}(a.Component);ee.defaultProps={loading:!1,error:{},fetchBooks:function(){},onAddedToCart:function(){},books:[]};var te=Object(E.c)(V(),Object(u.b)(function(e){var t=e.bookList;return{books:t.books,loading:t.loading,error:t.error}},function(e,t){var n=t.bookstoreService;return Object(E.b)({fetchBooks:Q(n),onAddedToCart:z},e)}))(ee),ne=(n(47),function(e){var t=e.id,n=e.title,a=e.count,r=e.total,c=e.idx,i=e.onIncrease,l=e.onDecrease,u=e.onDelete;return o.a.createElement("tr",null,o.a.createElement("td",null,c+1),o.a.createElement("td",null,n),o.a.createElement("td",null,a),o.a.createElement("td",null,"$",r),o.a.createElement("td",null,o.a.createElement("button",{onClick:function(){return u(t)},className:"btn btn-outline-danger btn-sm float-right"},o.a.createElement("i",{className:"fa fa-trash-o"})),o.a.createElement("button",{onClick:function(){return i(t)},className:"btn btn-outline-success btn-sm float-right"},o.a.createElement("i",{className:"fa fa-plus-circle"})),o.a.createElement("button",{onClick:function(){return l(t)},className:"btn btn-outline-warning btn-sm float-right"},o.a.createElement("i",{className:"fa fa-minus-circle"}))))});ne.defaultProps={id:0,title:"",count:0,total:0,idx:0,onIncrease:function(){},onDecrease:function(){},onDelete:function(){}};var ae=ne,oe=(n(48),function(e){var t=e.items,n=e.total,a=e.onIncrease,r=e.onDecrease,c=e.onDelete;return o.a.createElement("div",{className:"shopping-cart-table"},o.a.createElement("h2",null,"Your Order"),t&&t.length?o.a.createElement("div",{className:"table-responsive"},o.a.createElement("table",{className:"table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Item"),o.a.createElement("th",null,"Count"),o.a.createElement("th",null,"Price"),o.a.createElement("th",null,"Action"))),o.a.createElement("tbody",null,t.map(function(e,t){var n=e.id,i=e.title,l=e.count,u=e.total;return o.a.createElement(ae,{key:t,idx:t,id:n,title:i,count:l,total:u,onIncrease:a,onDecrease:r,onDelete:c})})))):null,o.a.createElement("div",{className:"total"},"Total: $",n))}),re={onIncrease:z,onDecrease:function(e){return{type:"BOOK_REMOVED_FROM_CART",payload:e}},onDelete:function(e){return{type:"ALL_BOOKS_REMOVED_FROM_CART",payload:e}}};oe.defaultProps={items:[],total:0,onIncrease:function(){},onDecrease:function(){},onDelete:function(){}};var ce=Object(u.b)(function(e){var t=e.shoppingCart;return{items:t.cartItems,total:t.totalOrder}},re)(oe),ie=function(){return o.a.createElement("div",null,o.a.createElement(te,null),o.a.createElement(ce,null))},le=function(){return o.a.createElement("div",null,"Cart Page")},ue=new f,se=function(){return o.a.createElement(u.a,{store:B},o.a.createElement(H,null,o.a.createElement(h,{value:ue},o.a.createElement(s.a,null,o.a.createElement("main",{role:"main",className:"container"},o.a.createElement(P,null),o.a.createElement(d.c,null,o.a.createElement(d.a,{path:"/",component:ie,exact:!0}),o.a.createElement(d.a,{path:"/cart",component:le})))))))};c.a.render(o.a.createElement(se,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/InternetShop",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/InternetShop","/service-worker.js");i?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):l(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):l(t,e)})}}()}},[[31,1,2]]]);
//# sourceMappingURL=main.7678037a.chunk.js.map